<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Komm, wir lernen die Uhr â€“ Lernspiel</title>
  <!-- ğŸŒ Globale Basis-Styles (Farben, Layout, MenÃ¼, Uhr etc.) -->
  <link rel="stylesheet" href="css/style.css">
  <!-- ğŸ¨ Level-spezifisches Design (Aufgaben, Drop-Zonen, Bilder etc.) -->
  <link rel="stylesheet" href="css/level.css">
  <!-- Optional: Schriftart fÃ¼r moderne, kindgerechte Optik -->
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
</head>
<body>
  <main id="gameContainer">
 <h1>Komm wir lernen die Uhr</h1>

<div id="levelSelect" class="level-overview">

  <!-- ğŸŸ¢ Einstieg -->
  <div class="chapter-container chapter-intro">
    <h2 class="chapter-header">ğŸŸ¢ Einstieg: Erste Schritte mit der Uhr</h2>

    <div class="level-grid">
      <div class="level-card intro-level" data-level="1">
        ğŸ•“ Level 1
        <small>Tageszeiten zuordnen</small>
      </div>

      <div class="level-card intro-level" data-level="2">
        ğŸ•“ Level 2
        <small>Tageszeiten erkennen</small>
      </div>

      <div class="level-card intro-level" data-level="3">
        ğŸ•“ Level 3
        <small>Um wie viel Uhr?</small>
      </div>
    </div>
  </div>

  <!-- ğŸ”µ Volle Stunden -->
  <div class="chapter-container chapter-hours">
    <h2 class="chapter-header">ğŸ”µ Kapitel 2: Volle Stunden</h2>

<!-- ğŸ¬ Lernvideo: Volle Stunde -->
<div class="level-card level-card--video" id="introVideoCard">
  <div class="video-card-head">
    <span class="pill pill--new">Neu</span>
    <span class="pill pill--seen" id="videoWatched" hidden>âœ“ angesehen</span>
  </div>

  <h3>ğŸ¬ Lernvideo: Volle Stunde</h3>
  <small>45 Sek. â€¢ Einstieg in die Uhr</small>

  <button class="btn-watch" id="openVideo">Ansehen</button>
</div>

<!-- ğŸ¥ Modal-Fenster fÃ¼r das Video -->
<div id="videoModal" class="video-modal" hidden>
  <div class="video-modal__backdrop" data-close></div>

  <div class="video-modal__dialog" role="dialog" aria-modal="true" aria-label="Lernvideo: Volle Stunde">
    <button class="video-modal__close" data-close aria-label="SchlieÃŸen">Ã—</button>

    <video id="lessonVideo" controls playsinline preload="metadata"
           poster="assets/images/video_poster.png" width="960" height="540">
      <source src="assets/videos/volle_stunde.mp4" type="video/mp4">
      Dein Browser unterstÃ¼tzt das Video-Tag nicht.
    </video>

    <div class="video-modal__actions">
      <button id="markWatched" class="btn-done">Als gesehen markieren</button>
    </div>
  </div>
</div>


    <div class="level-grid">
      <div class="level-card hours-level" data-level="4">
        ğŸ•“ Level 4
        <small>Volle Stunden 1</small>
      </div>
      <div class="level-card hours-level" data-level="5">
        ğŸ•“ Level 5
        <small>Volle Stunden 2</small>
      </div>
      <div class="level-card hours-level" data-level="6">
        ğŸ•“ Level 6
        <small>Volle Stunden 3</small>
      </div>
    </div>
  </div>

  <!-- ğŸŸ£ Viertelstunden -->
  <div class="chapter-container chapter-quarter">
    <h2 class="chapter-header">ğŸŸ£ Kapitel 3: Viertelstunden</h2>

    <div class="level-grid">
      <div class="level-card quarter-level" data-level="7">
        ğŸ•“ Level 7
        <small>Viertelstunden 1</small>
      </div>
      <div class="level-card quarter-level" data-level="8">
        ğŸ•“ Level 8
        <small>Viertelstunden 2</small>
      </div>
      <div class="level-card quarter-level" data-level="9">
        ğŸ•“ Level 9
        <small>Viertelstunden 3</small>
      </div>
    </div>
  </div>

  <!-- ğŸŸ  Minuten -->
  <div class="chapter-container chapter-minutes">
    <h2 class="chapter-header">ğŸŸ  Kapitel 4: Minuten</h2>

    <div class="level-grid">
      <div class="level-card minutes-level" data-level="10">
        ğŸ•“ Level 10
        <small>Minuten 1</small>
      </div>
      <div class="level-card minutes-level" data-level="11">
        ğŸ•“ Level 11
        <small>Minuten 2</small>
      </div>
      <div class="level-card minutes-level" data-level="12">
        ğŸ•“ Level 12
        <small>Minuten 3</small>
      </div>
    </div>
  </div>

</div>    
  </main>

  <script>
(() => {
  const openBtn  = document.getElementById('openVideo');
  const modal    = document.getElementById('videoModal');
  const closeEls = modal ? modal.querySelectorAll('[data-close]') : [];
  const video    = document.getElementById('lessonVideo');
  const doneBtn  = document.getElementById('markWatched');
  const seenPill = document.getElementById('videoWatched');
  const KEY      = 'volle_stunde_video_seen';

  const show = () => {
    modal.hidden = false;
    document.body.style.overflow = 'hidden';
  };
  const hide = () => {
    modal.hidden = true;
    document.body.style.overflow = '';
    video?.pause();
  };

  openBtn?.addEventListener('click', show);
  closeEls.forEach(el => el.addEventListener('click', hide));
  modal?.addEventListener('keydown', e => { if (e.key === 'Escape') hide(); });

  const markSeen = () => {
    localStorage.setItem(KEY, '1');
    seenPill.hidden = false;
  };
  if (localStorage.getItem(KEY) === '1') seenPill.hidden = false;

  doneBtn?.addEventListener('click', () => { markSeen(); hide(); });
  video?.addEventListener('ended', markSeen);
})();
</script>


  <!-- Wichtig: Reihenfolge! Erst levels.js, dann main.js -->
  <script src="js/levels.js"></script>
  <script src="js/main.js"></script>
</body>

</html>
