<main id="gameContainer">
  <h1>Komm wir lernen die Uhr</h1>

  <div id="levelSelect" class="level-overview">

    <!-- ğŸŸ¢ Einstieg bleibt wie gehabt -->
    <div class="chapter-container chapter-intro">
      <h2 class="chapter-header">ğŸŸ¢ Einstieg: Erste Schritte mit der Uhr</h2>
      <div class="level-grid">
        <div class="level-card intro-level" data-level="1">ğŸ•“ Level 1<small>Tageszeiten zuordnen</small></div>
        <div class="level-card intro-level" data-level="2">ğŸ•“ Level 2<small>Tageszeiten erkennen</small></div>
        <div class="level-card intro-level" data-level="3">ğŸ•“ Level 3<small>Um wie viel Uhr?</small></div>
      </div>
    </div>

    <!-- ğŸ”µ KAPITEL 2 in einer Zweispalten-Reihe -->
    <div class="chapter-row">
      <!-- Links: allgemeines Video-Panel fÃ¼r Kapitel 2 -->
      <aside class="video-panel" aria-labelledby="vid-kap2">
        <h3 id="vid-kap2">ğŸ¬ Lernvideos</h3>
        <ul class="video-list">
          <li><button class="video-thumb"
                      data-src="assets/videos/volle_stunde.mp4"
                      data-poster="assets/images/video_poster.png">
                Volle Stunde Â· 0:45
          </button></li>
          <!-- Weitere Tutorials zu Kapitel 2 hier ergÃ¤nzen -->
          <!-- <li><button class="video-thumb" data-src="assets/videos/xyz.mp4">Titel Â· Dauer</button></li> -->
        </ul>
      </aside>

      <!-- Rechts: dein bestehendes Kapitel 2 -->
      <section class="chapter-container chapter-hours" id="chapter2">
        <h2 class="chapter-header">ğŸ”µ Kapitel 2: Volle Stunden</h2>
        <div class="level-grid">
          <div class="level-card hours-level" data-level="4">ğŸ•“ Level 4<small>Volle Stunden 1</small></div>
          <div class="level-card hours-level" data-level="5">ğŸ•“ Level 5<small>Volle Stunden 2</small></div>
          <div class="level-card hours-level" data-level="6">ğŸ•“ Level 6<small>Volle Stunden 3</small></div>
        </div>
      </section>
    </div>

    <!-- ğŸŸ£ KAPITEL 3 -->
    <div class="chapter-row">
      <aside class="video-panel" aria-labelledby="vid-kap3">
        <h3 id="vid-kap3">ğŸ¬ Lernvideos</h3>
        <ul class="video-list">
          <!-- Beispiel-Platzhalter -->
          <li><button class="video-thumb" disabled>DemnÃ¤chst</button></li>
        </ul>
      </aside>

      <section class="chapter-container chapter-quarter" id="chapter3">
        <h2 class="chapter-header">ğŸŸ£ Kapitel 3: Viertelstunden</h2>
        <div class="level-grid">
          <div class="level-card quarter-level" data-level="7">ğŸ•“ Level 7<small>Viertelstunden 1</small></div>
          <div class="level-card quarter-level" data-level="8">ğŸ•“ Level 8<small>Viertelstunden 2</small></div>
          <div class="level-card quarter-level" data-level="9">ğŸ•“ Level 9<small>Viertelstunden 3</small></div>
        </div>
      </section>
    </div>

    <!-- ğŸŸ  KAPITEL 4 -->
    <div class="chapter-row">
      <aside class="video-panel" aria-labelledby="vid-kap4">
        <h3 id="vid-kap4">ğŸ¬ Lernvideos</h3>
        <ul class="video-list">
          <li><button class="video-thumb" disabled>DemnÃ¤chst</button></li>
        </ul>
      </aside>

      <section class="chapter-container chapter-minutes" id="chapter4">
        <h2 class="chapter-header">ğŸŸ  Kapitel 4: Minuten</h2>
        <div class="level-grid">
          <div class="level-card minutes-level" data-level="10">ğŸ•“ Level 10<small>Minuten 1</small></div>
          <div class="level-card minutes-level" data-level="11">ğŸ•“ Level 11<small>Minuten 2</small></div>
          <div class="level-card minutes-level" data-level="12">ğŸ•“ Level 12<small>Minuten 3</small></div>
        </div>
      </section>
    </div>

  </div> <!-- /#levelSelect -->
</main>

<!-- Ein gemeinsames Modal am Ende des <body> (nur einmal!) -->
<div id="videoModal" class="video-modal" hidden>
  <div class="video-modal__backdrop" data-close></div>
  <div class="video-modal__dialog" role="dialog" aria-modal="true" aria-label="Lernvideo">
    <button class="video-modal__close" data-close aria-label="SchlieÃŸen">Ã—</button>
    <div class="video-frame">
      <video id="lessonVideo" controls playsinline preload="none"></video>
    </div>
  </div>
</div>

<!-- Wichtig: Reihenfolge beibehalten -->
<script src="js/levels.js"></script>
<script src="js/main.js"></script>

<!-- Kleiner, generischer Opener nur fÃ¼r Videos (kein Layout/DOM-Umbau) -->
<script>
  (function(){
    const modal = document.getElementById('videoModal');
    const video = document.getElementById('lessonVideo');
    if (!modal || !video) return;

    // Ã–ffnen Ã¼ber jede .video-thumb (delegiert)
    document.addEventListener('click', (e) => {
      const btn = e.target.closest('.video-thumb');
      if (!btn) return;

      const src    = btn.dataset.src;
      const poster = btn.dataset.poster || '';
      if (!src) return;

      try {
        video.pause();
        video.src = src;
        if (poster) video.poster = poster;
        video.load();
      } catch(_) {}

      modal.hidden = false;
      document.body.style.overflow = 'hidden';
    });

    // SchlieÃŸen (Backdrop oder Close)
    document.addEventListener('click', (e) => {
      if (e.target.matches('[data-close]') || e.target.closest('[data-close]') || e.target.classList.contains('video-modal__backdrop')) {
        modal.hidden = true;
        document.body.style.overflow = '';
        try { video.pause(); } catch(_){}
      }
    });

    // Escape zum SchlieÃŸen
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && !modal.hidden) {
        modal.hidden = true;
        document.body.style.overflow = '';
        try { video.pause(); } catch(_){}
      }
    });
  })();
</script>